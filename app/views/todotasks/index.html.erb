<h1> <%= t('views.todotasks_topic') %> </h1>

<%= link_to t('views.home'), root_path %>

<%= search_form_for @q do |f| %>
  <%= f.label :name %>
  <%= f.search_field :name_cont %>

  <%= f.label :status %>
  <%= byebug %>
  <%= f.select :status_eq,
      Todotask.statuses.map { |status| [status[0], status[1]] } 
  %>

  <%= f.submit %>
<% end %>

<table>
  <thead>
    <tr>
      <td> <%= t('views.todotasks.title') %> </td>
      <td> <%= t('views.todotasks.content') %> </td>
      <td> <%= t('views.todotasks.starttime') %> </td>
      <td> <%= t('views.todotasks.endtime') %> </td>
      <td> <%= t('views.todotasks.status') %> </td>
    </tr>
  </thead>
  <tbody>
    <% @todotask.each do |t| %>
    <tr>
      <td> <%= t.name %> </td>
      <td> <%= t.content %> </td>
      <td> <%= (t.start_time)&.strftime('%F %R') %> </td>
      <td> <%= (t.end_time)&.strftime('%F %R') %> </td>
      <td> <%= t.status %> </td>
      <td>
        <%= link_to t('views.todotasks.edit'), edit_todotask_path(t) %>
        <%= link_to t('views.todotasks.delete'), todotask_path(t), method: 'delete', data: {confirm: t('views.todotasks.delete_msg') } %>
      </td>
    </tr>
    <% end %>
  </tbody>
</table>

<%= link_to "中文版", :controller => controller_name, :action => action_name, :locale => "zh-TW" %>
<%= link_to "English", :controller => controller_name, :action => action_name, :locale => "en" %>
